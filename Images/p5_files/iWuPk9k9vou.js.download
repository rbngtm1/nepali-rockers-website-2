if (self.CavalryLogger) { CavalryLogger.start_js(["Vx7ly"]); }

__d("UFIOrderingModeSelector.react",["cx","invariant","ix","Image.react","InlineBlock.react","Link.react","PopoverMenu.react","React","ReactXUIMenu","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("ReactXUIMenu").SelectableMenu,n=c("ReactXUIMenu").SelectableItem;k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.onMenuItemClick=function(u,v){this.props.onOrderChanged(v.item.getValue())}.bind(this),q}o.prototype.render=function(){if(this.props.orderingModes.length===0)return null;var p=this.props.orderingModes.filter(function(r){return r.value==this.props.selectedMode}.bind(this)).map(function(r){return r.name}).pop();p||i(0);var q=c("React").createElement(m,{className:"_4tju",onItemClick:this.onMenuItemClick},this.props.orderingModes.map(function(r){return c("React").createElement(n,{key:r.value,value:r.value,label:r.name,selected:r.value===this.props.selectedMode},c("React").createElement("div",{className:"_3scm"},c("React").createElement("div",{className:"_3scn"},r.name),c("React").createElement("div",{className:"_3sco"},r.description)))}.bind(this)));return c("React").createElement("div",{className:"_3scp"},c("React").createElement(c("InlineBlock.react"),null,c("React").createElement(c("PopoverMenu.react"),{className:"_3scs",menu:q,alignh:this.props.alignh||"right"},c("React").createElement(c("Link.react"),null,p,c("React").createElement("div",{className:"_3sct"})))))};f.exports=o}),null);
__d("CommentsOrderingModeSelectorUsageTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:CommentsOrderingModeSelectorUsageLoggerConfig",this.$CommentsOrderingModeSelectorUsageTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:CommentsOrderingModeSelectorUsageLoggerConfig",this.$CommentsOrderingModeSelectorUsageTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$CommentsOrderingModeSelectorUsageTypedLogger1={};return this};h.prototype.updateData=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1=babelHelpers["extends"]({},this.$CommentsOrderingModeSelectorUsageTypedLogger1,j);return this};h.prototype.setAvailableOrders=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.available_orders=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setEndOrder=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.end_order=j;return this};h.prototype.setPostFbid=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.post_fbid=j;return this};h.prototype.setPostOwnerFbid=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.post_owner_fbid=j;return this};h.prototype.setStartOrder=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.start_order=j;return this};h.prototype.setVC=function(j){this.$CommentsOrderingModeSelectorUsageTypedLogger1.vc=j;return this};var i={available_orders:true,end_order:true,post_fbid:true,post_owner_fbid:true,start_order:true,vc:true};f.exports=h}),null);
__d("UFIOrderingModeSelectorContainer.react",["CommentsOrderingModeSelectorUsageTypedLogger","Random","React","SubscriptionsHandler","UFIConfig","UFIInstanceAction","UFIOrderingModeSelector.react","UFIOrderingModeStore","UFISharedDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={selectedMode:c("UFIOrderingModeStore").getState().get(this.props.contextArgs.instanceid)},this.$UFIOrderingModeSelectorContainer1=null,this.onOrderChanged=function(q){var r=this.props.feedback;if(r.orderingmodes&&c("UFIConfig").logChangeOrderingModeUsageSampleRate>c("Random").random()){var s=r.orderingmodes.map(function(t){return t.value});new(c("CommentsOrderingModeSelectorUsageTypedLogger"))().setStartOrder(this.state.selectedMode).setEndOrder(q).setPostFbid(r.commentstargetfbid).setPostOwnerFbid(r.ownerid).setAvailableOrders(s).log()}c("UFISharedDispatcher").dispatch(c("UFIInstanceAction").changeOrderingMode(this.props.contextArgs,q))}.bind(this),m}k.prototype.componentDidMount=function(){this.$UFIOrderingModeSelectorContainer1=new(c("SubscriptionsHandler"))();this.$UFIOrderingModeSelectorContainer1.addSubscriptions(c("UFIOrderingModeStore").addListener(function(){if(!this.$UFIOrderingModeSelectorContainer1)return;this.setState({selectedMode:c("UFIOrderingModeStore").getState().get(this.props.contextArgs.instanceid)})}.bind(this)))};k.prototype.componentWillUnmount=function(){if(this.$UFIOrderingModeSelectorContainer1){this.$UFIOrderingModeSelectorContainer1.release();this.$UFIOrderingModeSelectorContainer1=null}};k.prototype.shouldComponentUpdate=function(l,m){return this.state.selectedMode!==m.selectedMode};k.prototype.render=function(){return c("React").createElement(c("UFIOrderingModeSelector.react"),{alignh:this.props.alignh||"right",onOrderChanged:this.onOrderChanged,orderingModes:this.props.feedback.orderingmodes,selectedMode:this.state.selectedMode})};k.propTypes={feedback:j.shape({defaultcommentorderingmode:j.string.isRequired,orderingmodes:j.arrayOf(j.shape({name:j.string.isRequired,description:j.string.isRequired,selected:j.bool.isRequired,value:j.string.isRequired})).isRequired,commentstargetfbid:j.string.isRequired,ownerid:j.string.isRequired}).isRequired,contextArgs:j.object.isRequired,alignh:j.string};f.exports=k}),null);
__d("XEventReminderImpressionLoggerAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/events/ajax/reminder/impression/",{acontext:{type:"StringToStringMap",required:true},data:{type:"StringToStringMap"}})}),null);
__d("EventReminderController",["Arbiter","AsyncRequest","DOM","DOMQuery","Event","Scroll","ScrollableArea","XEventReminderImpressionLoggerAsyncController"],(function a(b,c,d,e,f,g){__p&&__p();var h={registerReminder:function i(j,k){__p&&__p();this._firstOpen=true;var l=j.getDialog(),m=c("ScrollableArea").getInstance(c("DOMQuery").scry(l.getRoot(),".uiScrollableArea")[0]),n=null;if(m){n=c("DOM").find(m.getElement(),"div.uiScrollableAreaWrap");m.subscribe("scroll",function(){return c("Arbiter").inform("EventReminderDialog/scroll",{rect:n.getBoundingClientRect(),scrollTop:c("Scroll").getTop(n)})})}c("Event").listen(j.getRoot(),"click",function(event){event.preventDefault()});l.subscribe("show",function(){var o=c("XEventReminderImpressionLoggerAsyncController").getURIBuilder().setStringToStringMap("acontext",k).setStringToStringMap("data",{first_open:this._firstOpen}).getURI();new(c("AsyncRequest"))(o).send();this._firstOpen=false;var p={};if(n)p={rect:n.getBoundingClientRect()};c("Arbiter").inform("EventReminderDialog/show",p)}.bind(this));l.subscribe("hide",function(){return c("Arbiter").inform("EventReminderDialog/hide")})}};f.exports=h}),null);
__d("FlexibleScrollableArea",["DataStore","DOM","DOMDimensions","Event","Parent","Run","Style","Vector","throttle"],(function a(b,c,d,e,f,g){__p&&__p();var h=30,i=100;function j(k,l,m,n,o){"use strict";__p&&__p();this._element=k;this._tight=l;this._measureFrom=m;this._minHeight=n;this._margin=o;c("DataStore").set(this._element,"FlexibleScrollableArea",this);c("Run").onLeave(this.cleanup.bind(this));this._listener=c("Event").listen(window,"resize",c("throttle")(this.poke,i,this));this.poke()}j.prototype.poke=function(){"use strict";__p&&__p();var k=c("DOM").find(this._element,".uiScrollableAreaBody"),l=c("Vector").getElementDimensions(k).y+c("DOMDimensions").measureElementBox(k,"height",true,true,true),m;if(this._tight){var n=this.getMaxHeight();if(l<n+h)n+=h;m=Math.max(Math.min(l,n),this._minHeight)}else m=Math.max(this.getMaxHeight(),this._minHeight);c("Style").set(this._element,"height",m+"px")};j.prototype.getMaxHeight=function(){"use strict";if(this._measureFrom==="bottom"){var k=c("Vector").getViewportDimensions().y,l=c("Vector").getElementPosition(this._element,"viewport").y,m=k-l;return m-this._margin}var n=c("Vector").getElementPosition(this._element,"viewport").y+c("Vector").getElementDimensions(this._element).y;return n-this._margin};j.prototype.cleanup=function(){"use strict";this._listener&&this._listener.remove()};j.getInstance=function(k){"use strict";var l=c("Parent").byClass(k,"flexibleScrollableArea");return l?c("DataStore").get(l,"FlexibleScrollableArea"):null};f.exports=j}),null);
__d("ReminderStory",["AsyncRequest","Arbiter","Bootloader","DOMQuery","Event","FlexibleScrollableArea","LayerAutoFocus","ScrollableArea","SubscriptionsHandler","getActiveElement"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k,l,m,n){"use strict";__p&&__p();this.$ReminderStory1=false;this.$ReminderStory2=j;this.$ReminderStory3=i;c("Event").listen(i,"click",function(event){if(k&&c("DOMQuery").contains(k,event.target))return;j.show();if(l)new(c("AsyncRequest"))("/growth/reminder/logging.php").setData({context_data:l,first_click:!this.$ReminderStory1}).send();this.$ReminderStory1=true}.bind(this));if(m)j.subscribeOnce("show",function(){c("Bootloader").loadModules(["UIPagelet"],function(o){return o.loadFromEndpoint(m,j.getContent(),n)},"ReminderStory")});j.disableBehavior(c("LayerAutoFocus"));j.subscribe("aftershow",function(){__p&&__p();var o=j.getRoot(),p=j.hide.bind(j);this.$ReminderStory4=new(c("SubscriptionsHandler"))();this.$ReminderStory4.addSubscriptions(c("Event").listen(window,"resize",p),c("Event").listen(window,"scroll",p));var q=c("DOMQuery").scry(o,".inlineReplyTextArea");q[0]&&q[0].focus();var r=c("DOMQuery").scry(o,".jewelItemNew"),s=[];r.forEach(function(w){var x=r[w].getAttribute("id");if(x&&x.endsWith("_1_req"))s=s.concat(x.replace("_1_req",""))});if(s.length>0)new(c("AsyncRequest"))("/friends/requests/log_impressions").setData({ids:s.join(","),ref:"reminder_box"}).send();var t=c("ScrollableArea").getInstance(c("DOMQuery").scry(j.getRoot(),".uiScrollableArea")[0]),u=c("FlexibleScrollableArea").getInstance(c("DOMQuery").scry(j.getRoot(),".flexibleScrollableArea")[0]),v=function v(){if(u)u.poke();if(t){t.poke();c("Event").fire(c("DOMQuery").scry(j.getRoot(),".scrollable")[0],"scroll")}};v();c("Arbiter").subscribe("reflow",function(){var w=c("DOMQuery").scry(o,".fbRemindersBirthdayList");if(q&&w)for(var x=0;x<q.length;++x)if(q[x]==c("getActiveElement")()&&c("DOMQuery").contains(w[0],q[x]))v()})}.bind(this));j.subscribe("beforehide",function(){if(this.$ReminderStory4){this.$ReminderStory4.release();this.$ReminderStory4=null}}.bind(this))}h.prototype.getDialog=function(){"use strict";return this.$ReminderStory2};h.prototype.getRoot=function(){"use strict";return this.$ReminderStory3};f.exports=h}),null);