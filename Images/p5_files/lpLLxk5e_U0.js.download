if (self.CavalryLogger) { CavalryLogger.start_js(["kwATM"]); }

__d("LiveVideoWWWBeeperTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:LiveVideoWWWBeeperLoggerConfig",this.$LiveVideoWWWBeeperTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:LiveVideoWWWBeeperLoggerConfig",this.$LiveVideoWWWBeeperTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$LiveVideoWWWBeeperTypedLogger1={};return this};h.prototype.updateData=function(j){this.$LiveVideoWWWBeeperTypedLogger1=babelHelpers["extends"]({},this.$LiveVideoWWWBeeperTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$LiveVideoWWWBeeperTypedLogger1.event=j;return this};h.prototype.setOwnerID=function(j){this.$LiveVideoWWWBeeperTypedLogger1.owner_id=j;return this};h.prototype.setPersistDuration=function(j){this.$LiveVideoWWWBeeperTypedLogger1.persist_duration=j;return this};h.prototype.setSenderID=function(j){this.$LiveVideoWWWBeeperTypedLogger1.sender_id=j;return this};h.prototype.setTimeToHide=function(j){this.$LiveVideoWWWBeeperTypedLogger1.time_to_hide=j;return this};h.prototype.setVC=function(j){this.$LiveVideoWWWBeeperTypedLogger1.vc=j;return this};h.prototype.setVideoID=function(j){this.$LiveVideoWWWBeeperTypedLogger1.video_id=j;return this};var i={event:true,owner_id:true,persist_duration:true,sender_id:true,time_to_hide:true,vc:true,video_id:true};f.exports=h}),null);
__d("LiveVideoBeeperItemContentsImpl.react",["cx","invariant","ix","Animation","Arbiter","AsyncRequest","Bootloader","ErrorUtils","FBProfilePhotoShadow.react","Image.react","ImageBlock.react","LiveVideoBroadcastStatusUpdateSubscriptionHack","LiveVideoWWWBeeperTypedLogger","NotificationBeeperItemCloseButton.react","NotificationListRendererUtils","NotificationURI","NotificationUserActions","React","ReactDOM","SubscriptionsHandler","TextWithEntities.react","Timestamp.react","URI","VideoBroadcastStatus","VideoComponentLiveAudioAnimation.react","VideoComponentLiveVideoIndicator.react","VideoDataContainer.react","VideoPermalinkURI","VideoPlayer.react","VideoPlayerLoggerSource","Visibility","XLiveVideoBroadcastStatusController","nullthrows","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m="LiveVideoBeeperEvents/Mount",n={Mount:m};function o(q,r){return c("React").createElement("span",{className:"fwb"},q)}k=babelHelpers.inherits(p,c("React").Component);l=k&&k.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.state={subscriptionsHandler:new(c("SubscriptionsHandler"))()},this.$LiveVideoBeeperItemContentsImpl4=function(v){__p&&__p();this.$LiveVideoBeeperItemContentsImpl3("click");this.$LiveVideoBeeperItemContentsImpl2();this.props.onHide();if(v.button===1||v.altKey||v.ctrlKey||v.metaKey||v.shiftKey)return;var w=this.props.notification;c("NotificationListRendererUtils").openNotification(v,w);if(v.isDefaultPrevented()===true)return;var x=w.primerAttributes;if(x&&(x.rel==="async"||x.rel==="async-post")){var y=new(c("AsyncRequest"))(x.ajaxify||w.url);if(x.rel==="async-post")y.setMethod("POST");y.send();v.preventDefault()}else if(x&&x.rel==="theater"){v.persist();c("Bootloader").loadModules(["PhotoSnowlift"],function(z){z.bootstrap(x.ajaxify||w.url,v.currentTarget)},"LiveVideoBeeperItemContentsImpl.react")}else if(x&&(x.rel==="dialog"||x.rel==="dialog-post")){c("Bootloader").loadModules(["AsyncDialog"],function(z){z.bootstrap(x.ajaxify||w.url,v.currentTarget,"dialog")},"LiveVideoBeeperItemContentsImpl.react");v.preventDefault()}}.bind(this),this.$LiveVideoBeeperItemContentsImpl10=function(){this.$LiveVideoBeeperItemContentsImpl3("render_preview")}.bind(this),r}p.prototype.$LiveVideoBeeperItemContentsImpl1=function(){var q=this.props.notification.renderer_data;q==null||q.__typename==="LiveVideoNotificationRendererData"||i(0);return q};p.prototype.$LiveVideoBeeperItemContentsImpl2=function(){c("NotificationUserActions").markNotificationsAsRead([this.props.notification.alert_id])};p.prototype.$LiveVideoBeeperItemContentsImpl3=function(event){var q=this.$LiveVideoBeeperItemContentsImpl1();if(q==null)return;var r=null;if(event!=="render"&&this.renderTimestamp)r=Date.now()-this.renderTimestamp;c("ErrorUtils").applyWithGuard(function(){new(c("LiveVideoWWWBeeperTypedLogger"))().setEvent(event).setOwnerID(c("nullthrows")(q.owner_id)).setVideoID(c("nullthrows")(q.video_id)).setSenderID(c("nullthrows")(q.sender_id)).setTimeToHide(c("nullthrows")(q.beeper_time_to_hide)).setPersistDuration(r).log()})};p.prototype.$LiveVideoBeeperItemContentsImpl5=function(event){this.$LiveVideoBeeperItemContentsImpl3(event);this.$LiveVideoBeeperItemContentsImpl2();this.props.onHide();this.state.subscriptionsHandler.release()};p.prototype.$LiveVideoBeeperItemContentsImpl6=function(){new(c("Animation"))(c("ReactDOM").findDOMNode(this.refs.inner)).from("opacity","0").to("opacity","1").duration(200).go()};p.prototype.$LiveVideoBeeperItemContentsImpl7=function(q){var r=c("XLiveVideoBroadcastStatusController").getURIBuilder().setFBID("video_id",q).getURI();new(c("AsyncRequest"))().setURI(r).setHandler(function(s){if(s.payload.broadcast_status!=c("VideoBroadcastStatus").LIVE)this.$LiveVideoBeeperItemContentsImpl5("broadcast_end")}.bind(this)).send()};p.prototype.componentWillMount=function(){c("Bootloader").loadModules(["VideoPlayerMetaData"],function(q){var r=this.$LiveVideoBeeperItemContentsImpl8();if(r)q.genVideoData(r)}.bind(this),"LiveVideoBeeperItemContentsImpl.react")};p.prototype.componentDidMount=function(){__p&&__p();var q,r=this;this.$LiveVideoBeeperItemContentsImpl3("render");this.renderTimestamp=Date.now();c("Arbiter").inform(n.Mount);var s=this.$LiveVideoBeeperItemContentsImpl1();if(s){var q=function(){__p&&__p();var t=s.beeper_time_to_hide!=null?s.beeper_time_to_hide:3;if(t===0){r.props.onReadyToHide(r.props.notification.alert_id);return{v:void 0}}r.props.onPreventHide(r.props.notification.alert_id);if(t>0)c("setTimeoutAcrossTransitions")(function(){this.props.onReadyToHide(this.props.notification.alert_id)}.bind(r),t);var u=c("nullthrows")(s.video_id);r.state.subscriptionsHandler.addSubscriptions(c("Arbiter").subscribe(n.Mount,function(){this.$LiveVideoBeeperItemContentsImpl5("replace")}.bind(r)),c("Visibility").addListener(c("Visibility").VISIBLE,function(){this.$LiveVideoBeeperItemContentsImpl7(u)}.bind(r)),c("LiveVideoBroadcastStatusUpdateSubscriptionHack").subscribe(u,function(v){var w=v.live_video_broadcast_status_update_subscribe,x=w.video_broadcast_status;if(x!==c("VideoBroadcastStatus").LIVE)this.$LiveVideoBeeperItemContentsImpl5("broadcast_end")}.bind(r)))}();if(typeof q==="object")return q.v}else this.props.onReadyToHide(this.props.notification.alert_id)};p.prototype.$LiveVideoBeeperItemContentsImpl8=function(){var q=this.$LiveVideoBeeperItemContentsImpl9(),r=JSON.parse(q);return r.content_id};p.prototype.$LiveVideoBeeperItemContentsImpl9=function(){return this.props.notification.tracking||"{}"};p.prototype.componentWillUnmount=function(){this.state.subscriptionsHandler.release()};p.prototype.componentDidUpdate=function(q){if(q.notification.alert_id!==this.props.notification.alert_id||q.notification.creation_time!==this.props.notification.creation_time){this.$LiveVideoBeeperItemContentsImpl6();this.props.onReadyToHide(this.props.notification.alert_id)}};p.prototype.render=function(){__p&&__p();var q=this.$LiveVideoBeeperItemContentsImpl1(),r=new(c("URI").getRequestURI)();if(!q||!q.video_id){this.$LiveVideoBeeperItemContentsImpl3("render_error");return null}if(c("VideoPermalinkURI").isValid(r)){var s=c("VideoPermalinkURI").parse(r);if(s!=null&&q!=null&&s.video_id===q.video_id)return null}var t=q?c("React").createElement("div",{className:"_3qez"},c("React").createElement(c("VideoDataContainer.react"),{videoID:c("nullthrows")(q.video_id),onVideoLoaded:this.$LiveVideoBeeperItemContentsImpl10},c("React").createElement(c("VideoPlayer.react"),{autoplay:true,width:170,height:95,subOrigin:c("VideoPlayerLoggerSource").LIVE_BEEPER,startMuted:true,videoData:c("VideoDataContainer.react").VIDEO_DATA_PLACEHOLDER},c("React").createElement(c("VideoComponentLiveVideoIndicator.react"),{inBeeper:true}),c("React").createElement(c("VideoComponentLiveAudioAnimation.react"),null)))):null,u=this.props.notification,v=u.thumbnail?u.thumbnail.uri:j("97000"),w=c("NotificationURI").localize(new(c("URI"))(u.url));return c("React").createElement("div",{ref:"inner",className:this.props.className},c("React").createElement(c("NotificationBeeperItemCloseButton.react"),{onClick:function(){return this.$LiveVideoBeeperItemContentsImpl5("close")}.bind(this)}),c("React").createElement("a",{href:w,onClick:this.$LiveVideoBeeperItemContentsImpl4,className:"_3soi"},c("React").createElement(c("ImageBlock.react"),{className:"_3soj",spacing:"medium"},c("React").createElement(c("FBProfilePhotoShadow.react"),{className:"_2yt7"},c("React").createElement(c("Image.react"),{src:v,className:"_3sok"+(!v?" hidden_elem":"")})),c("React").createElement("div",{className:"_3sol"},c("React").createElement(c("TextWithEntities.react"),{renderEmoticons:true,renderEmoji:true,interpolator:o,ranges:u.title.ranges,aggregatedranges:u.title.aggregated_ranges,text:u.title.text}),t,c("React").createElement(c("ImageBlock.react"),{className:"_3som"},c("React").createElement(c("Image.react"),{className:"_1x8t",src:j("82430")}),c("React").createElement(c("Timestamp.react"),{time:u.timestamp.time,text:u.timestamp.text,verbose:u.timestamp.verbose}))))))};f.exports=p}),null);